name: Check Only

on:
  push:
  pull_request:
  workflow_dispatch:

permissions:
  contents: read
  checks: write

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Dummy log step
        run: echo "test"
      - name: Create Examples check
        uses: actions/github-script@v6
        with:
          github-token: ${{ github.token }}
          script: |
            const name = 'Examples (windows-2022, msvc-17.13.6, Debug)';
            const headSha = context.sha;
            const detailsUrl = `${process.env.GITHUB_SERVER_URL}/${context.repo.owner}/${context.repo.repo}/actions/runs/${process.env.GITHUB_RUN_ID}`;
            const check = await github.rest.checks.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              name,
              head_sha: headSha,
              status: 'in_progress',
              details_url: detailsUrl
            });
            await github.rest.checks.update({
              owner: context.repo.owner,
              repo: context.repo.repo,
              check_run_id: check.data.id,
              status: 'completed',
              conclusion: 'success',
              completed_at: new Date().toISOString(),
              details_url: detailsUrl
            });
